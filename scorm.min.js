var Debug_API=function Debug_API(){},Scorm=(Debug_API.prototype.Initialize=function(){return console.log(" \u2514 Debug_api:Initialize"),!0},Debug_API.prototype.Terminate=function(){return console.log(" \u2514 Debug_api:Terminate"),!0},Debug_API.prototype.GetValue=function(){return""},Debug_API.prototype.SetValue=function(a,b){return console.log(" \u250C Debug_api:SetValue: "+a+"="+b),""},Debug_API.prototype.Commit=function(){return console.log(" \u2514 Debug_api:Commit"),!0},Debug_API.prototype.GetLastError=function(){return 0},Debug_API.prototype.GetErrorString=function(){return""},Debug_API.prototype.GetDiagnostic=function(){return""},Debug_API.prototype.LMSInitialize=function(){return console.log(" \u2514 Debug_api:LMSInitialize"),!0},Debug_API.prototype.LMSFinish=function(){return console.log(" \u2514 Debug_api:LMSFinish"),!0},Debug_API.prototype.LMSGetValue=function(){return""},Debug_API.prototype.LMSSetValue=function(a,b){return console.log(" \u250C Debug_api:LMSSetValue: "+a+"="+b),""},Debug_API.prototype.LMSCommit=function(){return console.log(" \u2514 Debug_api:Commit"),!0},Debug_API.prototype.LMSGetLastError=function(){return 0},Debug_API.prototype.LMSGetErrorString=function(){return""},Debug_API.prototype.LMSGetDiagnostic=function(){return""},function(a){this.options=$.extend({},{debug_mode:"2004"},a),this.scorm_interface=null,this.mode=null,this.active=!1,this.objectives=[],this.interactions=[],this.start_time=new Date().getTime(),this.has_score=!1,this.is_debug=!1,this._search_for_api(window),null==this.scorm_interface?(this.mode=this.options.debug_mode,this.is_debug=!0,console.log("LMS not present - Created SCORM "+this.mode+" Debug interface."),this.scorm_interface=new Debug_API):(this.mode="LMSCommit"in this.scorm_interface?"1.2":"2004",console.log("Found SCORM "+this.mode+" interface."))});Scorm.prototype._format_time=function(a){var b=Math.floor,c=Math.round;function t(a,b){return a="0000"+new String(c(a)),a.substr(a.length-b)}a/=1e3;var d=b(a/3600),f=(a-=3600*d,b(a/60)),a=a-60*f;return"2004"==this.mode?"PT"+(d?d+"H":"")+(f?f+"M":"")+c(a)+"S":t(d,2)+":"+t(f,2)+":"+t(a,2)},Scorm.prototype._search_for_api=function(a,b,c){b=void 0===b?10:b,c=void 0===c?500:c;var d=this;!function e(a){try{for(;null!=a&&null==d.scorm_interface;){if(a.API)return void(d.scorm_interface=a.API);if(a.API_1484_11)return void(d.scorm_interface=a.API_1484_11);null==a.opener||a.opener.closed||e(a.opener),a=a===a.parent?null:a.parent}}catch(a){console.error("Error searching for SCORM API:",a)}}(a),null==d.scorm_interface&&0<b?setTimeout(function(){d._search_for_api(a,b-1,c)},c):null==d.scorm_interface&&console.warn("SCORM API not found after maximum retries.")},Scorm.prototype.Check=function(){var a=0,b="";if("2004"==this.mode){if(a=parseInt(this.scorm_interface.GetLastError())){console.log("Scorm:Check - Found error code: "+a);try{b="Error ("+a+"): "+this.scorm_interface.GetErrorString(a)}catch(a){console.error("There was a problem getting the error from the LMS",a)}}}else if("1.2"==this.mode&&(a=parseInt(this.scorm_interface.LMSGetLastError()))){console.log("Scorm:Check - Found error code: "+a);try{b="Error ("+a+"): "+this.scorm_interface.LMSGetErrorString(a)}catch(a){console.error("There was a problem getting the error from the LMS",a)}}return{code:a,description:b}},Scorm.prototype.Initialize=function(){console.log("Scorm:Initialize"),"2004"==this.mode?this.scorm_interface.Initialize(""):"1.2"==this.mode&&this.scorm_interface.LMSInitialize(""),0==this.Check().code&&(this.active=!0);var a=this.GetCompletionStatus();return a&&"not attempted"!=a&&"unknown"!=a||(this.SetIncomplete(),this.SetExit("suspend")),this.active},Scorm.prototype.Terminate=function(){window.e&&window.e.elucidat&&window.e.elucidat.options&&window.e.elucidat.options.enable_success_factors_support&&(this.Commit(),console.log("Scorm:Terminate - Success Factors Support Enabled, extra commit")),console.log("Scorm:Terminate"),"2004"==this.mode?this.scorm_interface.Terminate(""):"1.2"==this.mode&&this.scorm_interface.LMSFinish(""),0==this.Check().code&&(this.active=!1)},Scorm.prototype.Deactivate=function(){console.log("Scorm:Deactivate"),this.active=!1},Scorm.prototype.SetValue=function(a,b,c){if(this.active){"2004"==this.mode?(this.scorm_interface.SetValue(a,b),c||(d=this.scorm_interface.GetValue(a))):"1.2"==this.mode&&(this.scorm_interface.LMSSetValue(a,b),c||(d=this.scorm_interface.LMSGetValue(a))),top.postMessage&&top.postMessage(a+"="+b,"*");var d,e=this.Check(),f="Scorm:SetValue: "+a+"="+b;if(c||(f+="? "+(e.code?e.description:"Echo:"+d)),e.code&&0!==e.code)try{window.dispatchEvent(new CustomEvent("REPORT_ERROR",{detail:{error:"Scorm Error",type:"SCORM",code:e.code,description:e.description,key:a,value:b}}))}catch(a){console.warn("Error reporting error: "+a)}return console.log(f),e.code}},Scorm.prototype.GetValue=function(a){var b;if(this.active)return"2004"==this.mode?b=this.scorm_interface.GetValue(a):"1.2"==this.mode&&(b=this.scorm_interface.LMSGetValue(a)),console.log("Scorm:GetValue: "+a+"="+b),b},Scorm.prototype.Commit=function(){return console.log("Scorm:Commit"),"2004"==this.mode?this.scorm_interface.Commit(""):"1.2"==this.mode?this.scorm_interface.LMSCommit(""):void 0},Scorm.prototype.GetLearnerName=function(){return"2004"==this.mode?this.GetValue("cmi.learner_name"):"1.2"==this.mode?this.GetValue("cmi.core.student_name"):void 0},Scorm.prototype.GetLearnerID=function(){return"2004"==this.mode?this.GetValue("cmi.learner_id"):"1.2"==this.mode?this.GetValue("cmi.core.student_id"):void 0},Scorm.prototype.GetLocation=function(){return"2004"==this.mode?this.GetValue("cmi.location"):"1.2"==this.mode?this.GetValue("cmi.core.lesson_location"):void 0},Scorm.prototype.SetLocation=function(a){return"2004"==this.mode?this.SetValue("cmi.location",a):"1.2"==this.mode?this.SetValue("cmi.core.lesson_location",a):void 0},Scorm.prototype.GetExit=function(){return"2004"==this.mode?this.GetValue("cmi.exit"):"1.2"==this.mode?this.GetValue("cmi.core.exit"):void 0},Scorm.prototype.SetExit=function(a){return"2004"==this.mode?this.SetValue("cmi.exit",a):"1.2"==this.mode?this.SetValue("cmi.core.exit",a):void 0},Scorm.prototype.GetSuspendData=function(){return this.GetValue("cmi.suspend_data")},Scorm.prototype.SetSuspendData=function(a){this.SetValue("cmi.suspend_data",a),this.Commit()},Scorm.prototype.GetProgress=function(){if("2004"==this.mode)return this.GetValue("cmi.progress_measure")},Scorm.prototype.SetProgress=function(a){if("2004"==this.mode)return this.SetValue("cmi.progress_measure",a)},Scorm.prototype.GetCompletionThreshold=function(){return"2004"==this.mode&&this.GetValue("cmi.completion_threshold")},Scorm.prototype.SetCompletionThreshold=function(a){"2004"==this.mode&&this.SetValue("cmi.completion_threshold",a)},Scorm.prototype.GetScoreThreshold=function(){return"2004"==this.mode&&this.GetValue("cmi.progress_measure")},Scorm.prototype.SetScoreThreshold=function(a){"2004"==this.mode&&this.SetValue("cmi.scaled_passing_score",a)},Scorm.prototype.SetSessionTime=function(a){return a=a||new Date().getTime()-this.start_time,"2004"==this.mode?this.SetValue("cmi.session_time",this._format_time(a),!0):"1.2"==this.mode?this.SetValue("cmi.core.session_time",this._format_time(a),!0):void 0},Scorm.prototype.GetTotalTime=function(){return"2004"==this.mode?this.GetValue("cmi.total_time"):"1.2"==this.mode&&this.GetValue("cmi.core.total_time")},Scorm.prototype.GetCompletionStatus=function(){var a;return"2004"==this.mode?this.GetValue("cmi.completion_status"):"1.2"==this.mode?"passed"==(a=this.GetValue("cmi.core.lesson_status"))||"failed"==a?"completed":a:void 0},Scorm.prototype.SetCompletionStatus=function(a){"2004"==this.mode?this.SetValue("cmi.completion_status",a):"1.2"==this.mode&&this.SetValue("cmi.core.lesson_status",a),this.Commit()},Scorm.prototype.GetResult=function(){var a;return"2004"==this.mode?this.GetValue("cmi.success_status"):"1.2"==this.mode?"passed"==(a=this.GetValue("cmi.core.lesson_status"))||"failed"==a?a:"unknown":void 0},Scorm.prototype.SetResult=function(a){"2004"==this.mode?"passed"==a?this.SetValue("cmi.success_status","passed"):"failed"==a&&this.SetValue("cmi.success_status","failed"):"1.2"==this.mode&&("passed"==a?this.SetCompletionStatus("passed"):"failed"==a&&this.SetCompletionStatus("failed")),this.Commit()},Scorm.prototype.SetPassed=function(){this.SetResult("passed")},Scorm.prototype.SetFailed=function(){this.SetResult("failed")},Scorm.prototype.SetCompleted=function(){this.SetCompletionStatus("completed")},Scorm.prototype.SetIncomplete=function(){this.SetCompletionStatus("incomplete")},Scorm.prototype.SetScore=function(a,b,c){this.has_score=!0,"2004"==this.mode?(this.SetValue("cmi.score.raw",a),this.SetValue("cmi.score.scaled",1/c*a),this.SetValue("cmi.score.min",b),this.SetValue("cmi.score.max",c)):"1.2"==this.mode&&(this.SetValue("cmi.core.score.raw",a),this.SetValue("cmi.core.score.min",b),this.SetValue("cmi.core.score.max",c)),this.Commit()},Scorm.prototype.SetObjective=function(a,b,c,d,e,f){var g=this.objectives.indexOf(a);-1==g&&(g=this.objectives.length,this.SetValue("cmi.objectives."+g+".id",a),"2004"==this.mode&&this.SetValue("cmi.objectives."+g+".description",f),this.objectives.push(a),this.SetValue("cmi.objectives."+g+".score.min",d||0),this.SetValue("cmi.objectives."+g+".score.max",e||100)),this.SetValue("cmi.objectives."+g+".score.raw",c||0),"2004"==this.mode?(this.SetValue("cmi.objectives."+g+".completion_status","completed"),"passed"!=b&&"failed"!=b||this.SetValue("cmi.objectives."+g+".success_status",b)):"passed"==b||"failed"==b?this.SetValue("cmi.objectives."+g+".status",b):this.SetValue("cmi.objectives."+g+".status","completed")},Scorm.prototype.SetInteraction=function(b,d,e,f,g,h,i,j){var c=this.interactions.indexOf(b),k="1.2"==this.mode;-1==c&&(c=this.interactions.length,this.SetValue("cmi.interactions."+c+".id",b,k),this.SetValue("cmi.interactions."+c+".objectives.0.id",d,k),"2004"==this.mode&&(this.SetValue("cmi.interactions."+c+".description",g),this.SetValue("cmi.interactions."+c+".type",h)),this.interactions.push(b)),f&&("2004"==this.mode?h&&i&&(this.SetValue("cmi.interactions."+c+".learner_response",f),this.GetValue("cmi.interactions."+c+".learner_response")!=f&&(this.SetValue("cmi.interactions."+c+".learner_response","elucidaterror"),this.SetValue("cmi.interactions."+c+".learner_response",f),this.GetValue("cmi.interactions."+c+".learner_response")!=f)&&(d=f.split("[,]").join("__"),this.SetValue("cmi.interactions."+c+".learner_response",d)),this.SetValue("cmi.interactions."+c+".correct_responses.0.pattern",i),this.SetValue("cmi.interactions."+c+".weighting",j)):this.SetValue("cmi.interactions."+c+".student_response",f,k)),"neutral"==e?this.SetValue("cmi.interactions."+c+".result","neutral",k):"passed"==e||"completed"==e?this.SetValue("cmi.interactions."+c+".result","correct",k):"failed"==e&&("2004"==this.mode?this.SetValue("cmi.interactions."+c+".result","incorrect"):this.SetValue("cmi.interactions."+c+".result","wrong",k))},Scorm.prototype.GetLanguage=function(){var a=null;return"2004"==this.mode?a=this.GetValue("cmi.learner_preference.language"):"1.2"==this.mode&&(a=this.GetValue("cmi.student_preference.language")),a=a&&a.toLowerCase().trim()},Scorm.prototype.SetLanguage=function(a){return"2004"==this.mode?this.SetValue("cmi.learner_preference.language",a):"1.2"==this.mode?this.SetValue("cmi.student_preference.language",a):void 0};
