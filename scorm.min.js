var Debug_API=function(){},Scorm=(Debug_API.prototype.Initialize=function(){return console.log(" └ Debug_api:Initialize"),!0},Debug_API.prototype.Terminate=function(){return console.log(" └ Debug_api:Terminate"),!0},Debug_API.prototype.GetValue=function(e){return""},Debug_API.prototype.SetValue=function(e,t){return console.log(" ┌ Debug_api:SetValue: "+e+"="+t),""},Debug_API.prototype.Commit=function(){return console.log(" └ Debug_api:Commit"),!0},Debug_API.prototype.GetLastError=function(){return 0},Debug_API.prototype.GetErrorString=function(e){return""},Debug_API.prototype.GetDiagnostic=function(e){return""},Debug_API.prototype.LMSInitialize=function(){return console.log(" └ Debug_api:LMSInitialize"),!0},Debug_API.prototype.LMSFinish=function(){return console.log(" └ Debug_api:LMSFinish"),!0},Debug_API.prototype.LMSGetValue=function(e){return""},Debug_API.prototype.LMSSetValue=function(e,t){return console.log(" ┌ Debug_api:LMSSetValue: "+e+"="+t),""},Debug_API.prototype.LMSCommit=function(){return console.log(" └ Debug_api:Commit"),!0},Debug_API.prototype.LMSGetLastError=function(){return 0},Debug_API.prototype.LMSGetErrorString=function(e){return""},Debug_API.prototype.LMSGetDiagnostic=function(e){return""},function(e){this.options=$.extend({},{debug_mode:"2004"},e),this.scorm_interface=null,this.mode=null,this.active=!1,this.objectives=[],this.interactions=[],this.start_time=(new Date).getTime(),this.has_score=!1,this.is_debug=!1,this._search_for_api(window),null==this.scorm_interface?(this.mode=this.options.debug_mode,this.is_debug=!0,console.log("LMS not present - Created SCORM "+this.mode+" Debug interface."),this.scorm_interface=new Debug_API):("LMSCommit"in this.scorm_interface?this.mode="1.2":this.mode="2004",console.log("Found SCORM "+this.mode+" interface."))});Scorm.prototype._format_time=function(e){function t(e,t){e="0000"+new String(Math.round(e));return e.substr(e.length-t)}e/=1e3;var o=Math.floor(e/3600),i=(e-=3600*o,Math.floor(e/60)),e=e-60*i;return"2004"==this.mode?"PT"+(o?o+"H":"")+(i?i+"M":"")+Math.round(e)+"S":t(o,2)+":"+t(i,2)+":"+t(e,2)},Scorm.prototype._search_for_api=function(e,t,o){t=void 0!==t?t:10,o=void 0!==o?o:500;var i=this;!function e(t){try{for(;null!=t&&null==i.scorm_interface;){if(t.API)return void(i.scorm_interface=t.API);if(t.API_1484_11)return void(i.scorm_interface=t.API_1484_11);null==t.opener||t.opener.closed||e(t.opener),t=t===t.parent?null:t.parent}}catch(e){console.error("Error searching for SCORM API:",e)}}(e),null==i.scorm_interface&&0<t?setTimeout(function(){i._search_for_api(e,t-1,o)},o):null==i.scorm_interface&&console.warn("SCORM API not found after maximum retries.")},Scorm.prototype.Check=function(){var e=0,t="";if("2004"==this.mode){if(e=parseInt(this.scorm_interface.GetLastError())){console.log("Scorm:Check - Found error code: "+e);try{t="Error ("+e+"): "+this.scorm_interface.GetErrorString(e)}catch(e){console.error("There was a problem getting the error from the LMS",e)}}}else if("1.2"==this.mode&&(e=parseInt(this.scorm_interface.LMSGetLastError()))){console.log("Scorm:Check - Found error code: "+e);try{t="Error ("+e+"): "+this.scorm_interface.LMSGetErrorString(e)}catch(e){console.error("There was a problem getting the error from the LMS",e)}}return{code:e,description:t}},Scorm.prototype.Initialize=function(){console.log("Scorm:Initialize"),"2004"==this.mode?this.scorm_interface.Initialize(""):"1.2"==this.mode&&this.scorm_interface.LMSInitialize(""),0==this.Check().code&&(this.active=!0);var e=this.GetCompletionStatus();return e&&"not attempted"!=e&&"unknown"!=e||(this.SetIncomplete(),this.SetExit("suspend")),this.active},Scorm.prototype.Terminate=function(){window.e&&window.e.elucidat&&window.e.elucidat.options&&window.e.elucidat.options.enable_success_factors_support&&(this.Commit(),console.log("Scorm:Terminate - Success Factors Support Enabled, extra commit")),console.log("Scorm:Terminate"),"2004"==this.mode?this.scorm_interface.Terminate(""):"1.2"==this.mode&&this.scorm_interface.LMSFinish(""),0==this.Check().code&&(this.active=!1)},Scorm.prototype.Deactivate=function(){console.log("Scorm:Deactivate"),this.active=!1},Scorm.prototype.SetValue=function(e,t,o){if(this.active){"2004"==this.mode?(this.scorm_interface.SetValue(e,t),o||(i=this.scorm_interface.GetValue(e))):"1.2"==this.mode&&(this.scorm_interface.LMSSetValue(e,t),o||(i=this.scorm_interface.LMSGetValue(e))),top.postMessage&&top.postMessage(e+"="+t,"*");var i,r=this.Check(),s="Scorm:SetValue: "+e+"="+t;if(o||(s+="? "+(r.code?r.description:"Echo:"+i)),r.code&&0!==r.code){!["Error (404): Element is write only","Error (401): Not implemented error"].includes(r.description)&&window.e&&window.e.elucidat&&window.e.elucidat.options&&window.e.elucidat.options.enable_success_factors_support&&alert("An error has been detected in the LMS. Please report the following details to your administrator.\nError Code: "+r.code+"\nDescription: "+r.description);try{window.dispatchEvent(new CustomEvent("REPORT_ERROR",{detail:{error:"Scorm Error",type:"SCORM",code:r.code,description:r.description,key:e,value:t}}))}catch(e){console.warn("Error reporting error: "+e)}}return console.log(s),r.code}},Scorm.prototype.GetValue=function(e){var t;if(this.active)return"2004"==this.mode?t=this.scorm_interface.GetValue(e):"1.2"==this.mode&&(t=this.scorm_interface.LMSGetValue(e)),console.log("Scorm:GetValue: "+e+"="+t),t},Scorm.prototype.Commit=function(){return console.log("Scorm:Commit"),"2004"==this.mode?this.scorm_interface.Commit(""):"1.2"==this.mode?this.scorm_interface.LMSCommit(""):void 0},Scorm.prototype.GetLearnerName=function(){return"2004"==this.mode?this.GetValue("cmi.learner_name"):"1.2"==this.mode?this.GetValue("cmi.core.student_name"):void 0},Scorm.prototype.GetLearnerID=function(){return"2004"==this.mode?this.GetValue("cmi.learner_id"):"1.2"==this.mode?this.GetValue("cmi.core.student_id"):void 0},Scorm.prototype.GetLocation=function(){return"2004"==this.mode?this.GetValue("cmi.location"):"1.2"==this.mode?this.GetValue("cmi.core.lesson_location"):void 0},Scorm.prototype.SetLocation=function(e){return"2004"==this.mode?this.SetValue("cmi.location",e):"1.2"==this.mode?this.SetValue("cmi.core.lesson_location",e):void 0},Scorm.prototype.GetExit=function(){return"2004"==this.mode?this.GetValue("cmi.exit"):"1.2"==this.mode?this.GetValue("cmi.core.exit"):void 0},Scorm.prototype.SetExit=function(e){return"2004"==this.mode?this.SetValue("cmi.exit",e):"1.2"==this.mode?this.SetValue("cmi.core.exit",e):void 0},Scorm.prototype.GetSuspendData=function(){return this.GetValue("cmi.suspend_data")},Scorm.prototype.SetSuspendData=function(e){this.SetValue("cmi.suspend_data",e),this.Commit()},Scorm.prototype.GetProgress=function(){if("2004"==this.mode)return this.GetValue("cmi.progress_measure")},Scorm.prototype.SetProgress=function(e){if("2004"==this.mode)return this.SetValue("cmi.progress_measure",e)},Scorm.prototype.GetCompletionThreshold=function(){return"2004"==this.mode&&this.GetValue("cmi.completion_threshold")},Scorm.prototype.SetCompletionThreshold=function(e){"2004"==this.mode&&this.SetValue("cmi.completion_threshold",e)},Scorm.prototype.GetScoreThreshold=function(){return"2004"==this.mode&&this.GetValue("cmi.progress_measure")},Scorm.prototype.SetScoreThreshold=function(e){"2004"==this.mode&&this.SetValue("cmi.scaled_passing_score",e)},Scorm.prototype.SetSessionTime=function(e){return e=e||(new Date).getTime()-this.start_time,"2004"==this.mode?this.SetValue("cmi.session_time",this._format_time(e),!0):"1.2"==this.mode?this.SetValue("cmi.core.session_time",this._format_time(e),!0):void 0},Scorm.prototype.GetTotalTime=function(){return"2004"==this.mode?this.GetValue("cmi.total_time"):"1.2"==this.mode&&this.GetValue("cmi.core.total_time")},Scorm.prototype.GetCompletionStatus=function(){var e;return"2004"==this.mode?this.GetValue("cmi.completion_status"):"1.2"==this.mode?"passed"==(e=this.GetValue("cmi.core.lesson_status"))||"failed"==e?"completed":e:void 0},Scorm.prototype.SetCompletionStatus=function(e){"2004"==this.mode?this.SetValue("cmi.completion_status",e):"1.2"==this.mode&&this.SetValue("cmi.core.lesson_status",e),this.Commit()},Scorm.prototype.GetResult=function(){var e;return"2004"==this.mode?this.GetValue("cmi.success_status"):"1.2"==this.mode?"passed"==(e=this.GetValue("cmi.core.lesson_status"))||"failed"==e?e:"unknown":void 0},Scorm.prototype.SetResult=function(e){"2004"==this.mode?"passed"==e?this.SetValue("cmi.success_status","passed"):"failed"==e&&this.SetValue("cmi.success_status","failed"):"1.2"==this.mode&&("passed"==e?this.SetCompletionStatus("passed"):"failed"==e&&this.SetCompletionStatus("failed")),this.Commit()},Scorm.prototype.SetPassed=function(){this.SetResult("passed")},Scorm.prototype.SetFailed=function(){this.SetResult("failed")},Scorm.prototype.SetCompleted=function(){this.SetCompletionStatus("completed")},Scorm.prototype.SetIncomplete=function(){this.SetCompletionStatus("incomplete")},Scorm.prototype.SetScore=function(e,t,o){this.has_score=!0,"2004"==this.mode?(this.SetValue("cmi.score.raw",e),this.SetValue("cmi.score.scaled",1/o*e),this.SetValue("cmi.score.min",t),this.SetValue("cmi.score.max",o)):"1.2"==this.mode&&(this.SetValue("cmi.core.score.raw",e),this.SetValue("cmi.core.score.min",t),this.SetValue("cmi.core.score.max",o)),this.Commit()},Scorm.prototype.SetObjective=function(e,t,o,i,r,s){var n=this.objectives.indexOf(e);-1==n&&(n=this.objectives.length,this.SetValue("cmi.objectives."+n+".id",e),"2004"==this.mode&&this.SetValue("cmi.objectives."+n+".description",s),this.objectives.push(e),this.SetValue("cmi.objectives."+n+".score.min",i||0),this.SetValue("cmi.objectives."+n+".score.max",r||100)),this.SetValue("cmi.objectives."+n+".score.raw",o||0),"2004"==this.mode?(this.SetValue("cmi.objectives."+n+".completion_status","completed"),"passed"!=t&&"failed"!=t||this.SetValue("cmi.objectives."+n+".success_status",t)):"passed"==t||"failed"==t?this.SetValue("cmi.objectives."+n+".status",t):this.SetValue("cmi.objectives."+n+".status","completed")},Scorm.prototype.SetInteraction=function(e,t,o,i,r,s,n,c){var a=this.interactions.indexOf(e),u="1.2"==this.mode;-1==a&&(a=this.interactions.length,this.SetValue("cmi.interactions."+a+".id",e,u),this.SetValue("cmi.interactions."+a+".objectives.0.id",t,u),"2004"==this.mode&&(this.SetValue("cmi.interactions."+a+".description",r),this.SetValue("cmi.interactions."+a+".type",s)),this.interactions.push(e)),i&&("2004"==this.mode?s&&n&&(this.SetValue("cmi.interactions."+a+".learner_response",i),this.GetValue("cmi.interactions."+a+".learner_response")!=i&&(this.SetValue("cmi.interactions."+a+".learner_response","elucidaterror"),this.SetValue("cmi.interactions."+a+".learner_response",i),this.GetValue("cmi.interactions."+a+".learner_response")!=i)&&(t=i.split("[,]").join("__"),this.SetValue("cmi.interactions."+a+".learner_response",t)),this.SetValue("cmi.interactions."+a+".correct_responses.0.pattern",n),this.SetValue("cmi.interactions."+a+".weighting",c)):this.SetValue("cmi.interactions."+a+".student_response",i,u)),"neutral"==o?this.SetValue("cmi.interactions."+a+".result","neutral",u):"passed"==o||"completed"==o?this.SetValue("cmi.interactions."+a+".result","correct",u):"failed"==o&&("2004"==this.mode?this.SetValue("cmi.interactions."+a+".result","incorrect"):this.SetValue("cmi.interactions."+a+".result","wrong",u))},Scorm.prototype.GetLanguage=function(){var e=null;return"2004"==this.mode?e=this.GetValue("cmi.learner_preference.language"):"1.2"==this.mode&&(e=this.GetValue("cmi.student_preference.language")),e=e&&e.toLowerCase().trim()},Scorm.prototype.SetLanguage=function(e){return"2004"==this.mode?this.SetValue("cmi.learner_preference.language",e):"1.2"==this.mode?this.SetValue("cmi.student_preference.language",e):void 0};